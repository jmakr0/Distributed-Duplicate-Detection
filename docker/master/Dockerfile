FROM rdse/base

ARG JAR_NAME
ARG MASTER_HOST
ARG PATH_DATA
ARG PATH_GOLD_STANDARD

ENV ROLE="master"
ENV HOST=$MASTER_HOST
ENV JAR_NAME=$JAR_NAME
ENV WORKERS=0
ENV MASTER_PORT=7877
ENV PATH_DATA=$PATH_DATA
ENV PATH_GOLD_STANDARD=$PATH_GOLD_STANDARD

EXPOSE $MASTER_PORT

CMD java -jar $JAR_NAME $ROLE \
        -w $WORKERS \
        -h $HOST \
        -p $MASTER_PORT \
        -d $PATH_DATA \
        -g $PATH_GOLD_STANDARD
